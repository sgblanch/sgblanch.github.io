/*! For license information please see degenprime.js.LICENSE.txt */
!function(){"use strict";var t={"./node_modules/@bjorn3/browser_wasi_shim/dist/debug.js":function(t,e,n){n.r(e),n.d(e,{debug:function(){return r}});const r=new class{enable(t){this.log=function(t,e){if(t){return console.log.bind(console,"%c%s","color: #265BA0",e)}return()=>{}}(void 0===t||t,this.prefix)}get enabled(){return this.isEnabled}constructor(t){this.isEnabled=t,this.prefix="wasi:",this.enable(t)}}(!1)},"./node_modules/@bjorn3/browser_wasi_shim/dist/fd.js":function(t,e,n){n.r(e),n.d(e,{Fd:function(){return i}});var r=n("./node_modules/@bjorn3/browser_wasi_shim/dist/wasi_defs.js");class i{fd_advise(t,e,n){return r.ERRNO_NOTSUP}fd_allocate(t,e){return r.ERRNO_NOTSUP}fd_close(){return 0}fd_datasync(){return r.ERRNO_NOTSUP}fd_fdstat_get(){return{ret:r.ERRNO_NOTSUP,fdstat:null}}fd_fdstat_set_flags(t){return r.ERRNO_NOTSUP}fd_fdstat_set_rights(t,e){return r.ERRNO_NOTSUP}fd_filestat_get(){return{ret:r.ERRNO_NOTSUP,filestat:null}}fd_filestat_set_size(t){return r.ERRNO_NOTSUP}fd_filestat_set_times(t,e,n){return r.ERRNO_NOTSUP}fd_pread(t,e,n){return{ret:r.ERRNO_NOTSUP,nread:0}}fd_prestat_get(){return{ret:r.ERRNO_NOTSUP,prestat:null}}fd_prestat_dir_name(){return{ret:r.ERRNO_NOTSUP,prestat_dir_name:null}}fd_pwrite(t,e,n){return{ret:r.ERRNO_NOTSUP,nwritten:0}}fd_read(t,e){return{ret:r.ERRNO_NOTSUP,nread:0}}fd_readdir_single(t){return{ret:r.ERRNO_NOTSUP,dirent:null}}fd_seek(t,e){return{ret:r.ERRNO_NOTSUP,offset:0n}}fd_sync(){return 0}fd_tell(){return{ret:r.ERRNO_NOTSUP,offset:0n}}fd_write(t,e){return{ret:r.ERRNO_NOTSUP,nwritten:0}}path_create_directory(t){return r.ERRNO_NOTSUP}path_filestat_get(t,e){return{ret:r.ERRNO_NOTSUP,filestat:null}}path_filestat_set_times(t,e,n,i,s){return r.ERRNO_NOTSUP}path_link(t,e,n,i){return r.ERRNO_NOTSUP}path_open(t,e,n,i,s,u){return{ret:r.ERRNO_NOTSUP,fd_obj:null}}path_readlink(t){return{ret:r.ERRNO_NOTSUP,data:null}}path_remove_directory(t){return r.ERRNO_NOTSUP}path_rename(t,e,n){return r.ERRNO_NOTSUP}path_symlink(t,e){return r.ERRNO_NOTSUP}path_unlink_file(t){return r.ERRNO_NOTSUP}}},"./node_modules/@bjorn3/browser_wasi_shim/dist/fs_core.js":function(t,e,n){n.r(e),n.d(e,{Directory:function(){return d},File:function(){return c},OpenDirectory:function(){return _},OpenFile:function(){return u},OpenSyncOPFSFile:function(){return o},PreopenDirectory:function(){return f},SyncOPFSFile:function(){return a}});var r=n("./node_modules/@bjorn3/browser_wasi_shim/dist/debug.js"),i=n("./node_modules/@bjorn3/browser_wasi_shim/dist/wasi_defs.js"),s=n("./node_modules/@bjorn3/browser_wasi_shim/dist/fd.js");class u extends s.Fd{fd_fdstat_get(){return{ret:0,fdstat:new i.Fdstat(i.FILETYPE_REGULAR_FILE,0)}}fd_read(t,e){let n=0;for(const r of e){if(!(this.file_pos<this.file.data.byteLength))break;{const e=this.file.data.slice(Number(this.file_pos),Number(this.file_pos+BigInt(r.buf_len)));t.set(e,r.buf),this.file_pos+=BigInt(e.length),n+=e.length}}return{ret:0,nread:n}}fd_pread(t,e,n){let r=0;for(const i of e){if(!(n<this.file.data.byteLength))break;{const e=this.file.data.slice(Number(n),Number(n+BigInt(i.buf_len)));t.set(e,i.buf),n+=BigInt(e.length),r+=e.length}}return{ret:0,nread:r}}fd_seek(t,e){let n;switch(e){case i.WHENCE_SET:n=t;break;case i.WHENCE_CUR:n=this.file_pos+t;break;case i.WHENCE_END:n=BigInt(this.file.data.byteLength)+t;break;default:return{ret:i.ERRNO_INVAL,offset:0n}}return n<0?{ret:i.ERRNO_INVAL,offset:0n}:(this.file_pos=n,{ret:0,offset:this.file_pos})}fd_tell(){return{ret:0,offset:this.file_pos}}fd_write(t,e){let n=0;if(this.file.readonly)return{ret:i.ERRNO_BADF,nwritten:n};for(const r of e){const e=t.slice(r.buf,r.buf+r.buf_len);if(this.file_pos+BigInt(e.byteLength)>this.file.size){const t=this.file.data;this.file.data=new Uint8Array(Number(this.file_pos+BigInt(e.byteLength))),this.file.data.set(t)}this.file.data.set(e.slice(0,Number(this.file.size-this.file_pos)),Number(this.file_pos)),this.file_pos+=BigInt(e.byteLength),n+=r.buf_len}return{ret:0,nwritten:n}}fd_pwrite(t,e,n){let r=0;if(this.file.readonly)return{ret:i.ERRNO_BADF,nwritten:r};for(const i of e){const e=t.slice(i.buf,i.buf+i.buf_len);if(n+BigInt(e.byteLength)>this.file.size){const t=this.file.data;this.file.data=new Uint8Array(Number(n+BigInt(e.byteLength))),this.file.data.set(t)}this.file.data.set(e.slice(0,Number(this.file.size-n)),Number(n)),n+=BigInt(e.byteLength),r+=i.buf_len}return{ret:0,nwritten:r}}fd_filestat_get(){return{ret:0,filestat:this.file.stat()}}constructor(t){super(),this.file_pos=0n,this.file=t}}class o extends s.Fd{fd_fdstat_get(){return{ret:0,fdstat:new i.Fdstat(i.FILETYPE_REGULAR_FILE,0)}}fd_filestat_get(){return{ret:0,filestat:new i.Filestat(i.FILETYPE_REGULAR_FILE,BigInt(this.file.handle.getSize()))}}fd_read(t,e){let n=0;for(const r of e){if(!(this.position<this.file.handle.getSize()))break;{const e=new Uint8Array(t.buffer,r.buf,r.buf_len),i=this.file.handle.read(e,{at:Number(this.position)});this.position+=BigInt(i),n+=i}}return{ret:0,nread:n}}fd_seek(t,e){let n;switch(e){case i.WHENCE_SET:n=BigInt(t);break;case i.WHENCE_CUR:n=this.position+BigInt(t);break;case i.WHENCE_END:n=BigInt(this.file.handle.getSize())+BigInt(t);break;default:return{ret:i.ERRNO_INVAL,offset:0n}}return n<0?{ret:i.ERRNO_INVAL,offset:0n}:(this.position=n,{ret:i.ERRNO_SUCCESS,offset:this.position})}fd_write(t,e){let n=0;if(this.file.readonly)return{ret:i.ERRNO_BADF,nwritten:n};for(const r of e){const e=new Uint8Array(t.buffer,r.buf,r.buf_len),i=this.file.handle.write(e,{at:Number(this.position)});this.position+=BigInt(i),n+=i}return{ret:i.ERRNO_SUCCESS,nwritten:n}}fd_datasync(){return this.file.handle.flush(),i.ERRNO_SUCCESS}fd_sync(){return this.fd_datasync()}fd_close(){return i.ERRNO_SUCCESS}constructor(t){super(),this.position=0n,this.file=t}}class _ extends s.Fd{fd_fdstat_get(){return{ret:0,fdstat:new i.Fdstat(i.FILETYPE_DIRECTORY,0)}}fd_readdir_single(t){if(r.debug.enabled&&(r.debug.log("readdir_single",t),r.debug.log(t,Object.keys(this.dir.contents))),r.debug.log(t,Object.keys(this.dir.contents).slice(Number(t))),t>=BigInt(Object.keys(this.dir.contents).length))return{ret:0,dirent:null};const e=Object.keys(this.dir.contents)[Number(t)],n=this.dir.contents[e];return{ret:0,dirent:new i.Dirent(t+1n,e,n.stat().filetype)}}path_filestat_get(t,e){const n=this.dir.get_entry_for_path(e);return null==n?{ret:i.ERRNO_NOENT,filestat:null}:{ret:0,filestat:n.stat()}}path_open(t,e,n,r,s,u){let o=this.dir.get_entry_for_path(e);if(null==o){if((n&i.OFLAGS_CREAT)!=i.OFLAGS_CREAT)return{ret:i.ERRNO_NOENT,fd_obj:null};o=this.dir.create_entry_for_path(e,(n&i.OFLAGS_DIRECTORY)==i.OFLAGS_DIRECTORY)}else if((n&i.OFLAGS_EXCL)==i.OFLAGS_EXCL)return{ret:i.ERRNO_EXIST,fd_obj:null};if((n&i.OFLAGS_DIRECTORY)==i.OFLAGS_DIRECTORY&&o.stat().filetype!==i.FILETYPE_DIRECTORY)return{ret:i.ERRNO_NOTDIR,fd_obj:null};if(o.readonly&&(r&BigInt(i.RIGHTS_FD_WRITE))==BigInt(i.RIGHTS_FD_WRITE))return{ret:i.ERRNO_PERM,fd_obj:null};if(!(o instanceof d)&&(n&i.OFLAGS_TRUNC)==i.OFLAGS_TRUNC){const t=o.truncate();if(t!=i.ERRNO_SUCCESS)return{ret:t,fd_obj:null}}return{ret:i.ERRNO_SUCCESS,fd_obj:o.open(u)}}path_create_directory(t){return this.path_open(0,t,i.OFLAGS_CREAT|i.OFLAGS_DIRECTORY,0n,0n,0).ret}path_unlink_file(t){t=this.clean_path(t);const e=this.dir.get_parent_dir_for_path(t),n=t.split("/"),r=n[n.length-1],s=this.dir.get_entry_for_path(t);return null===s?i.ERRNO_NOENT:s.stat().filetype===i.FILETYPE_DIRECTORY?i.ERRNO_ISDIR:(delete e.contents[r],i.ERRNO_SUCCESS)}path_remove_directory(t){t=this.clean_path(t);const e=this.dir.get_parent_dir_for_path(t),n=t.split("/"),r=n[n.length-1],s=this.dir.get_entry_for_path(t);return null===s?i.ERRNO_NOENT:s instanceof d&&s.stat().filetype===i.FILETYPE_DIRECTORY?0!==Object.keys(s.contents).length?i.ERRNO_NOTEMPTY:void 0===e.contents[r]?i.ERRNO_NOENT:(delete e.contents[r],i.ERRNO_SUCCESS):i.ERRNO_NOTDIR}clean_path(t){for(;t.length>0&&"/"===t[t.length-1];)t=t.slice(0,t.length-1);return t}constructor(t){super(),this.dir=t}}class f extends _{fd_prestat_get(){return{ret:0,prestat:i.Prestat.dir(this.prestat_name.length)}}fd_prestat_dir_name(){return{ret:0,prestat_dir_name:this.prestat_name}}constructor(t,e){super(new d(e)),this.prestat_name=(new TextEncoder).encode(t)}}class c{open(t){const e=new u(this);return t&i.FDFLAGS_APPEND&&e.fd_seek(0n,i.WHENCE_END),e}get size(){return BigInt(this.data.byteLength)}stat(){return new i.Filestat(i.FILETYPE_REGULAR_FILE,this.size)}truncate(){return this.readonly?i.ERRNO_PERM:(this.data=new Uint8Array([]),i.ERRNO_SUCCESS)}constructor(t,e){this.data=new Uint8Array(t),this.readonly=!!e?.readonly}}class a{open(t){const e=new o(this);return t&i.FDFLAGS_APPEND&&e.fd_seek(0n,i.WHENCE_END),e}get size(){return BigInt(this.handle.getSize())}stat(){return new i.Filestat(i.FILETYPE_REGULAR_FILE,this.size)}truncate(){return this.readonly?i.ERRNO_PERM:(this.handle.truncate(0),i.ERRNO_SUCCESS)}constructor(t,e){this.handle=t,this.readonly=!!e?.readonly}}class d{open(t){return new _(this)}stat(){return new i.Filestat(i.FILETYPE_DIRECTORY,0n)}get_entry_for_path(t){let e=this;for(const n of t.split("/")){if(""==n)break;if("."!=n){if(!(e instanceof d))return null;if(null==e.contents[n])return r.debug.log(n),null;e=e.contents[n]}}return e}get_parent_dir_for_path(t){if(""===t)return null;let e=this,n=e;for(const i of t.split("/")){if(""===i)break;if("."!==i){if(!(e instanceof d))return r.debug.log(e),null;if(void 0===e.contents[i])return r.debug.log(i),null;n=e,e=e.contents[i]}}return n}create_entry_for_path(t,e){let n=this;const i=t.split("/").filter((t=>"/"!=t));for(let t=0;t<i.length;t++){const s=i[t];if(!(n instanceof d))break;null!=n.contents[s]||(r.debug.log("create",s),t!=i.length-1||e?n.contents[s]=new d({}):n.contents[s]=new c(new ArrayBuffer(0))),n=n.contents[s]}return n}constructor(t){this.readonly=!1,this.contents=t}}},"./node_modules/@bjorn3/browser_wasi_shim/dist/index.js":function(t,e,n){n.r(e),n.d(e,{Directory:function(){return s.Directory},Fd:function(){return i.Fd},File:function(){return s.File},OpenDirectory:function(){return s.OpenDirectory},OpenFile:function(){return s.OpenFile},OpenSyncOPFSFile:function(){return s.OpenSyncOPFSFile},PreopenDirectory:function(){return s.PreopenDirectory},SyncOPFSFile:function(){return s.SyncOPFSFile},WASI:function(){return r.default},strace:function(){return u.strace},wasi:function(){return o}});var r=n("./node_modules/@bjorn3/browser_wasi_shim/dist/wasi.js"),i=n("./node_modules/@bjorn3/browser_wasi_shim/dist/fd.js"),s=n("./node_modules/@bjorn3/browser_wasi_shim/dist/fs_core.js"),u=n("./node_modules/@bjorn3/browser_wasi_shim/dist/strace.js"),o=n("./node_modules/@bjorn3/browser_wasi_shim/dist/wasi_defs.js")},"./node_modules/@bjorn3/browser_wasi_shim/dist/strace.js":function(t,e,n){function r(t,e){return new Proxy(t,{get(t,n,r){const i=Reflect.get(t,n,r);return e.includes(n)?i:function(...t){console.log(n,"(",...t,")");const e=Reflect.apply(i,r,t);return console.log(" =",e),e}}})}n.r(e),n.d(e,{strace:function(){return r}})},"./node_modules/@bjorn3/browser_wasi_shim/dist/wasi.js":function(t,e,n){n.r(e),n.d(e,{WASIProcExit:function(){return s},default:function(){return u}});var r=n("./node_modules/@bjorn3/browser_wasi_shim/dist/wasi_defs.js"),i=n("./node_modules/@bjorn3/browser_wasi_shim/dist/debug.js");class s extends Error{constructor(t){super("exit with exit code "+t),this.code=t}}let u=class{start(t){this.inst=t;try{t.exports._start()}catch(t){if(t instanceof s)return t.code;throw t}}initialize(t){this.inst=t,t.exports._initialize()}constructor(t,e,n,u={}){this.args=[],this.env=[],this.fds=[],i.debug.enable(u.debug),this.args=t,this.env=e,this.fds=n;const o=this;this.wasiImport={args_sizes_get(t,e){const n=new DataView(o.inst.exports.memory.buffer);n.setUint32(t,o.args.length,!0);let r=0;for(const t of o.args)r+=t.length+1;return n.setUint32(e,r,!0),i.debug.log(n.getUint32(t,!0),n.getUint32(e,!0)),0},args_get(t,e){const n=new DataView(o.inst.exports.memory.buffer),r=new Uint8Array(o.inst.exports.memory.buffer),s=e;for(let i=0;i<o.args.length;i++){n.setUint32(t,e,!0),t+=4;const s=(new TextEncoder).encode(o.args[i]);r.set(s,e),n.setUint8(e+s.length,0),e+=s.length+1}return i.debug.enabled&&i.debug.log(new TextDecoder("utf-8").decode(r.slice(s,e))),0},environ_sizes_get(t,e){const n=new DataView(o.inst.exports.memory.buffer);n.setUint32(t,o.env.length,!0);let r=0;for(const t of o.env)r+=t.length+1;return n.setUint32(e,r,!0),i.debug.log(n.getUint32(t,!0),n.getUint32(e,!0)),0},environ_get(t,e){const n=new DataView(o.inst.exports.memory.buffer),r=new Uint8Array(o.inst.exports.memory.buffer),s=e;for(let i=0;i<o.env.length;i++){n.setUint32(t,e,!0),t+=4;const s=(new TextEncoder).encode(o.env[i]);r.set(s,e),n.setUint8(e+s.length,0),e+=s.length+1}return i.debug.enabled&&i.debug.log(new TextDecoder("utf-8").decode(r.slice(s,e))),0},clock_res_get(t,e){let n;switch(t){case r.CLOCKID_MONOTONIC:n=5000n;break;case r.CLOCKID_REALTIME:n=1000000n;break;default:return r.ERRNO_NOSYS}return new DataView(o.inst.exports.memory.buffer).setBigUint64(e,n,!0),r.ERRNO_SUCCESS},clock_time_get(t,e,n){const i=new DataView(o.inst.exports.memory.buffer);if(t===r.CLOCKID_REALTIME)i.setBigUint64(n,1000000n*BigInt((new Date).getTime()),!0);else if(t==r.CLOCKID_MONOTONIC){let t;try{t=BigInt(Math.round(1e6*performance.now()))}catch(e){t=0n}i.setBigUint64(n,t,!0)}else i.setBigUint64(n,0n,!0);return 0},fd_advise(t,e,n,i){return null!=o.fds[t]?o.fds[t].fd_advise(e,n,i):r.ERRNO_BADF},fd_allocate(t,e,n){return null!=o.fds[t]?o.fds[t].fd_allocate(e,n):r.ERRNO_BADF},fd_close(t){if(null!=o.fds[t]){const e=o.fds[t].fd_close();return o.fds[t]=void 0,e}return r.ERRNO_BADF},fd_datasync(t){return null!=o.fds[t]?o.fds[t].fd_datasync():r.ERRNO_BADF},fd_fdstat_get(t,e){if(null!=o.fds[t]){const{ret:n,fdstat:r}=o.fds[t].fd_fdstat_get();return null!=r&&r.write_bytes(new DataView(o.inst.exports.memory.buffer),e),n}return r.ERRNO_BADF},fd_fdstat_set_flags(t,e){return null!=o.fds[t]?o.fds[t].fd_fdstat_set_flags(e):r.ERRNO_BADF},fd_fdstat_set_rights(t,e,n){return null!=o.fds[t]?o.fds[t].fd_fdstat_set_rights(e,n):r.ERRNO_BADF},fd_filestat_get(t,e){if(null!=o.fds[t]){const{ret:n,filestat:r}=o.fds[t].fd_filestat_get();return null!=r&&r.write_bytes(new DataView(o.inst.exports.memory.buffer),e),n}return r.ERRNO_BADF},fd_filestat_set_size(t,e){return null!=o.fds[t]?o.fds[t].fd_filestat_set_size(e):r.ERRNO_BADF},fd_filestat_set_times(t,e,n,i){return null!=o.fds[t]?o.fds[t].fd_filestat_set_times(e,n,i):r.ERRNO_BADF},fd_pread(t,e,n,i,s){const u=new DataView(o.inst.exports.memory.buffer),_=new Uint8Array(o.inst.exports.memory.buffer);if(null!=o.fds[t]){const f=r.Iovec.read_bytes_array(u,e,n),{ret:c,nread:a}=o.fds[t].fd_pread(_,f,i);return u.setUint32(s,a,!0),c}return r.ERRNO_BADF},fd_prestat_get(t,e){const n=new DataView(o.inst.exports.memory.buffer);if(null!=o.fds[t]){const{ret:r,prestat:i}=o.fds[t].fd_prestat_get();return null!=i&&i.write_bytes(n,e),r}return r.ERRNO_BADF},fd_prestat_dir_name(t,e,n){if(null!=o.fds[t]){const{ret:n,prestat_dir_name:r}=o.fds[t].fd_prestat_dir_name();if(null!=r){new Uint8Array(o.inst.exports.memory.buffer).set(r,e)}return n}return r.ERRNO_BADF},fd_pwrite(t,e,n,i,s){const u=new DataView(o.inst.exports.memory.buffer),_=new Uint8Array(o.inst.exports.memory.buffer);if(null!=o.fds[t]){const f=r.Ciovec.read_bytes_array(u,e,n),{ret:c,nwritten:a}=o.fds[t].fd_pwrite(_,f,i);return u.setUint32(s,a,!0),c}return r.ERRNO_BADF},fd_read(t,e,n,i){const s=new DataView(o.inst.exports.memory.buffer),u=new Uint8Array(o.inst.exports.memory.buffer);if(null!=o.fds[t]){const _=r.Iovec.read_bytes_array(s,e,n),{ret:f,nread:c}=o.fds[t].fd_read(u,_);return s.setUint32(i,c,!0),f}return r.ERRNO_BADF},fd_readdir(t,e,n,i,s){const u=new DataView(o.inst.exports.memory.buffer),_=new Uint8Array(o.inst.exports.memory.buffer);if(null!=o.fds[t]){let r=0;for(;;){const{ret:f,dirent:c}=o.fds[t].fd_readdir_single(i);if(0!=f)return u.setUint32(s,r,!0),f;if(null==c)break;if(n-r<c.head_length()){r=n;break}const a=new ArrayBuffer(c.head_length());if(c.write_head_bytes(new DataView(a),0),_.set(new Uint8Array(a).slice(0,Math.min(a.byteLength,n-r)),e),e+=c.head_length(),r+=c.head_length(),n-r<c.name_length()){r=n;break}c.write_name_bytes(_,e,n-r),e+=c.name_length(),r+=c.name_length(),i=c.d_next}return u.setUint32(s,r,!0),0}return r.ERRNO_BADF},fd_renumber(t,e){if(null!=o.fds[t]&&null!=o.fds[e]){const n=o.fds[e].fd_close();return 0!=n?n:(o.fds[e]=o.fds[t],o.fds[t]=void 0,0)}return r.ERRNO_BADF},fd_seek(t,e,n,i){const s=new DataView(o.inst.exports.memory.buffer);if(null!=o.fds[t]){const{ret:r,offset:u}=o.fds[t].fd_seek(e,n);return s.setBigInt64(i,u,!0),r}return r.ERRNO_BADF},fd_sync(t){return null!=o.fds[t]?o.fds[t].fd_sync():r.ERRNO_BADF},fd_tell(t,e){const n=new DataView(o.inst.exports.memory.buffer);if(null!=o.fds[t]){const{ret:r,offset:i}=o.fds[t].fd_tell();return n.setBigUint64(e,i,!0),r}return r.ERRNO_BADF},fd_write(t,e,n,i){const s=new DataView(o.inst.exports.memory.buffer),u=new Uint8Array(o.inst.exports.memory.buffer);if(null!=o.fds[t]){const _=r.Ciovec.read_bytes_array(s,e,n),{ret:f,nwritten:c}=o.fds[t].fd_write(u,_);return s.setUint32(i,c,!0),f}return r.ERRNO_BADF},path_create_directory(t,e,n){const r=new Uint8Array(o.inst.exports.memory.buffer);if(null!=o.fds[t]){const i=new TextDecoder("utf-8").decode(r.slice(e,e+n));return o.fds[t].path_create_directory(i)}},path_filestat_get(t,e,n,i,s){const u=new DataView(o.inst.exports.memory.buffer),_=new Uint8Array(o.inst.exports.memory.buffer);if(null!=o.fds[t]){const r=new TextDecoder("utf-8").decode(_.slice(n,n+i)),{ret:f,filestat:c}=o.fds[t].path_filestat_get(e,r);return null!=c&&c.write_bytes(u,s),f}return r.ERRNO_BADF},path_filestat_set_times(t,e,n,i,s,u,_){const f=new Uint8Array(o.inst.exports.memory.buffer);if(null!=o.fds[t]){const r=new TextDecoder("utf-8").decode(f.slice(n,n+i));return o.fds[t].path_filestat_set_times(e,r,s,u,_)}return r.ERRNO_BADF},path_link(t,e,n,i,s,u,_){const f=new Uint8Array(o.inst.exports.memory.buffer);if(null!=o.fds[t]&&null!=o.fds[s]){const r=new TextDecoder("utf-8").decode(f.slice(n,n+i)),c=new TextDecoder("utf-8").decode(f.slice(u,u+_));return o.fds[s].path_link(t,e,r,c)}return r.ERRNO_BADF},path_open(t,e,n,s,u,_,f,c,a){const d=new DataView(o.inst.exports.memory.buffer),l=new Uint8Array(o.inst.exports.memory.buffer);if(null!=o.fds[t]){const r=new TextDecoder("utf-8").decode(l.slice(n,n+s));i.debug.log(r);const{ret:R,fd_obj:E}=o.fds[t].path_open(e,r,u,_,f,c);if(0!=R)return R;o.fds.push(E);const N=o.fds.length-1;return d.setUint32(a,N,!0),0}return r.ERRNO_BADF},path_readlink(t,e,n,s,u,_){const f=new DataView(o.inst.exports.memory.buffer),c=new Uint8Array(o.inst.exports.memory.buffer);if(null!=o.fds[t]){const a=new TextDecoder("utf-8").decode(c.slice(e,e+n));i.debug.log(a);const{ret:d,data:l}=o.fds[t].path_readlink(a);if(null!=l){if(l.length>u)return f.setUint32(_,0,!0),r.ERRNO_BADF;c.set(l,s),f.setUint32(_,l.length,!0)}return d}return r.ERRNO_BADF},path_remove_directory(t,e,n){const i=new Uint8Array(o.inst.exports.memory.buffer);if(null!=o.fds[t]){const r=new TextDecoder("utf-8").decode(i.slice(e,e+n));return o.fds[t].path_remove_directory(r)}return r.ERRNO_BADF},path_rename(t,e,n,r,i,s){throw"FIXME what is the best abstraction for this?"},path_symlink(t,e,n,i,s){const u=new Uint8Array(o.inst.exports.memory.buffer);if(null!=o.fds[n]){const r=new TextDecoder("utf-8").decode(u.slice(t,t+e)),_=new TextDecoder("utf-8").decode(u.slice(i,i+s));return o.fds[n].path_symlink(r,_)}return r.ERRNO_BADF},path_unlink_file(t,e,n){const i=new Uint8Array(o.inst.exports.memory.buffer);if(null!=o.fds[t]){const r=new TextDecoder("utf-8").decode(i.slice(e,e+n));return o.fds[t].path_unlink_file(r)}return r.ERRNO_BADF},poll_oneoff(t,e,n){throw"async io not supported"},proc_exit(t){throw new s(t)},proc_raise(t){throw"raised signal "+t},sched_yield(){},random_get(t,e){const n=new Uint8Array(o.inst.exports.memory.buffer);for(let r=0;r<e;r++)n[t+r]=256*Math.random()|0},sock_recv(t,e,n){throw"sockets not supported"},sock_send(t,e,n){throw"sockets not supported"},sock_shutdown(t,e){throw"sockets not supported"},sock_accept(t,e){throw"sockets not supported"}}}}},"./node_modules/@bjorn3/browser_wasi_shim/dist/wasi_defs.js":function(t,e,n){n.r(e),n.d(e,{ADVICE_DONTNEED:function(){return ge},ADVICE_NOREUSE:function(){return me},ADVICE_NORMAL:function(){return Ae},ADVICE_RANDOM:function(){return pe},ADVICE_SEQUENTIAL:function(){return be},ADVICE_WILLNEED:function(){return we},CLOCKID_MONOTONIC:function(){return o},CLOCKID_PROCESS_CPUTIME_ID:function(){return _},CLOCKID_REALTIME:function(){return u},CLOCKID_THREAD_CPUTIME_ID:function(){return f},Ciovec:function(){return fe},Dirent:function(){return Ie},ERRNO_2BIG:function(){return a},ERRNO_ACCES:function(){return d},ERRNO_ADDRINUSE:function(){return l},ERRNO_ADDRNOTAVAIL:function(){return R},ERRNO_AFNOSUPPORT:function(){return E},ERRNO_AGAIN:function(){return N},ERRNO_ALREADY:function(){return O},ERRNO_BADF:function(){return h},ERRNO_BADMSG:function(){return S},ERRNO_BUSY:function(){return T},ERRNO_CANCELED:function(){return I},ERRNO_CHILD:function(){return A},ERRNO_CONNABORTED:function(){return b},ERRNO_CONNREFUSED:function(){return p},ERRNO_CONNRESET:function(){return w},ERRNO_DEADLK:function(){return g},ERRNO_DESTADDRREQ:function(){return m},ERRNO_DOM:function(){return D},ERRNO_DQUOT:function(){return y},ERRNO_EXIST:function(){return L},ERRNO_FAULT:function(){return F},ERRNO_FBIG:function(){return U},ERRNO_HOSTUNREACH:function(){return C},ERRNO_IDRM:function(){return P},ERRNO_ILSEQ:function(){return G},ERRNO_INPROGRESS:function(){return B},ERRNO_INTR:function(){return x},ERRNO_INVAL:function(){return H},ERRNO_IO:function(){return j},ERRNO_ISCONN:function(){return k},ERRNO_ISDIR:function(){return M},ERRNO_LOOP:function(){return Y},ERRNO_MFILE:function(){return V},ERRNO_MLINK:function(){return v},ERRNO_MSGSIZE:function(){return W},ERRNO_MULTIHOP:function(){return K},ERRNO_NAMETOOLONG:function(){return z},ERRNO_NETDOWN:function(){return X},ERRNO_NETRESET:function(){return Q},ERRNO_NETUNREACH:function(){return Z},ERRNO_NFILE:function(){return q},ERRNO_NOBUFS:function(){return J},ERRNO_NODEV:function(){return $},ERRNO_NOENT:function(){return tt},ERRNO_NOEXEC:function(){return et},ERRNO_NOLCK:function(){return nt},ERRNO_NOLINK:function(){return rt},ERRNO_NOMEM:function(){return it},ERRNO_NOMSG:function(){return st},ERRNO_NOPROTOOPT:function(){return ut},ERRNO_NOSPC:function(){return ot},ERRNO_NOSYS:function(){return _t},ERRNO_NOTCAPABLE:function(){return Ut},ERRNO_NOTCONN:function(){return ft},ERRNO_NOTDIR:function(){return ct},ERRNO_NOTEMPTY:function(){return at},ERRNO_NOTRECOVERABLE:function(){return dt},ERRNO_NOTSOCK:function(){return lt},ERRNO_NOTSUP:function(){return Rt},ERRNO_NOTTY:function(){return Et},ERRNO_NXIO:function(){return Nt},ERRNO_OVERFLOW:function(){return Ot},ERRNO_OWNERDEAD:function(){return ht},ERRNO_PERM:function(){return St},ERRNO_PIPE:function(){return Tt},ERRNO_PROTO:function(){return It},ERRNO_PROTONOSUPPORT:function(){return At},ERRNO_PROTOTYPE:function(){return bt},ERRNO_RANGE:function(){return pt},ERRNO_ROFS:function(){return wt},ERRNO_SPIPE:function(){return gt},ERRNO_SRCH:function(){return mt},ERRNO_STALE:function(){return Dt},ERRNO_SUCCESS:function(){return c},ERRNO_TIMEDOUT:function(){return yt},ERRNO_TXTBSY:function(){return Lt},ERRNO_XDEV:function(){return Ft},EVENTRWFLAGS_FD_READWRITE_HANGUP:function(){return Ke},EVENTTYPE_CLOCK:function(){return Ve},EVENTTYPE_FD_READ:function(){return ve},EVENTTYPE_FD_WRITE:function(){return We},FDFLAGS_APPEND:function(){return De},FDFLAGS_DSYNC:function(){return ye},FDFLAGS_NONBLOCK:function(){return Le},FDFLAGS_RSYNC:function(){return Fe},FDFLAGS_SYNC:function(){return Ue},FD_STDERR:function(){return s},FD_STDIN:function(){return r},FD_STDOUT:function(){return i},FILETYPE_BLOCK_DEVICE:function(){return Re},FILETYPE_CHARACTER_DEVICE:function(){return Ee},FILETYPE_DIRECTORY:function(){return Ne},FILETYPE_REGULAR_FILE:function(){return Oe},FILETYPE_SOCKET_DGRAM:function(){return he},FILETYPE_SOCKET_STREAM:function(){return Se},FILETYPE_SYMBOLIC_LINK:function(){return Te},FILETYPE_UNKNOWN:function(){return le},FSTFLAGS_ATIM:function(){return Pe},FSTFLAGS_ATIM_NOW:function(){return Ge},FSTFLAGS_MTIM:function(){return Be},FSTFLAGS_MTIM_NOW:function(){return xe},Fdstat:function(){return Ce},Filestat:function(){return Ye},Iovec:function(){return _e},OFLAGS_CREAT:function(){return He},OFLAGS_DIRECTORY:function(){return je},OFLAGS_EXCL:function(){return ke},OFLAGS_TRUNC:function(){return Me},PREOPENTYPE_DIR:function(){return Fn},Prestat:function(){return Cn},PrestatDir:function(){return Un},RIFLAGS_RECV_PEEK:function(){return gn},RIFLAGS_RECV_WAITALL:function(){return mn},RIGHTS_FD_ADVISE:function(){return kt},RIGHTS_FD_ALLOCATE:function(){return Mt},RIGHTS_FD_DATASYNC:function(){return Ct},RIGHTS_FD_FDSTAT_SET_FLAGS:function(){return Bt},RIGHTS_FD_FILESTAT_GET:function(){return te},RIGHTS_FD_FILESTAT_SET_SIZE:function(){return ee},RIGHTS_FD_FILESTAT_SET_TIMES:function(){return ne},RIGHTS_FD_READ:function(){return Pt},RIGHTS_FD_READDIR:function(){return zt},RIGHTS_FD_SEEK:function(){return Gt},RIGHTS_FD_SYNC:function(){return xt},RIGHTS_FD_TELL:function(){return Ht},RIGHTS_FD_WRITE:function(){return jt},RIGHTS_PATH_CREATE_DIRECTORY:function(){return Yt},RIGHTS_PATH_CREATE_FILE:function(){return Vt},RIGHTS_PATH_FILESTAT_GET:function(){return qt},RIGHTS_PATH_FILESTAT_SET_SIZE:function(){return Jt},RIGHTS_PATH_FILESTAT_SET_TIMES:function(){return $t},RIGHTS_PATH_LINK_SOURCE:function(){return vt},RIGHTS_PATH_LINK_TARGET:function(){return Wt},RIGHTS_PATH_OPEN:function(){return Kt},RIGHTS_PATH_READLINK:function(){return Xt},RIGHTS_PATH_REMOVE_DIRECTORY:function(){return ie},RIGHTS_PATH_RENAME_SOURCE:function(){return Qt},RIGHTS_PATH_RENAME_TARGET:function(){return Zt},RIGHTS_PATH_SYMLINK:function(){return re},RIGHTS_PATH_UNLINK_FILE:function(){return se},RIGHTS_POLL_FD_READWRITE:function(){return ue},RIGHTS_SOCK_SHUTDOWN:function(){return oe},ROFLAGS_RECV_DATA_TRUNCATED:function(){return Dn},SDFLAGS_RD:function(){return yn},SDFLAGS_WR:function(){return Ln},SIGNAL_ABRT:function(){return tn},SIGNAL_ALRM:function(){return fn},SIGNAL_BUS:function(){return en},SIGNAL_CHLD:function(){return an},SIGNAL_CONT:function(){return dn},SIGNAL_FPE:function(){return nn},SIGNAL_HUP:function(){return Qe},SIGNAL_ILL:function(){return Je},SIGNAL_INT:function(){return Ze},SIGNAL_KILL:function(){return rn},SIGNAL_NONE:function(){return Xe},SIGNAL_PIPE:function(){return _n},SIGNAL_POLL:function(){return bn},SIGNAL_PROF:function(){return In},SIGNAL_PWR:function(){return pn},SIGNAL_QUIT:function(){return qe},SIGNAL_SEGV:function(){return un},SIGNAL_STOP:function(){return ln},SIGNAL_SYS:function(){return wn},SIGNAL_TERM:function(){return cn},SIGNAL_TRAP:function(){return $e},SIGNAL_TSTP:function(){return Rn},SIGNAL_TTIN:function(){return En},SIGNAL_TTOU:function(){return Nn},SIGNAL_URG:function(){return On},SIGNAL_USR1:function(){return sn},SIGNAL_USR2:function(){return on},SIGNAL_VTALRM:function(){return Tn},SIGNAL_WINCH:function(){return An},SIGNAL_XCPU:function(){return hn},SIGNAL_XFSZ:function(){return Sn},SUBCLOCKFLAGS_SUBSCRIPTION_CLOCK_ABSTIME:function(){return ze},WHENCE_CUR:function(){return ae},WHENCE_END:function(){return de},WHENCE_SET:function(){return ce}});const r=0,i=1,s=2,u=0,o=1,_=2,f=3,c=0,a=1,d=2,l=3,R=4,E=5,N=6,O=7,h=8,S=9,T=10,I=11,A=12,b=13,p=14,w=15,g=16,m=17,D=18,y=19,L=20,F=21,U=22,C=23,P=24,G=25,B=26,x=27,H=28,j=29,k=30,M=31,Y=32,V=33,v=34,W=35,K=36,z=37,X=38,Q=39,Z=40,q=41,J=42,$=43,tt=44,et=45,nt=46,rt=47,it=48,st=49,ut=50,ot=51,_t=52,ft=53,ct=54,at=55,dt=56,lt=57,Rt=58,Et=59,Nt=60,Ot=61,ht=62,St=63,Tt=64,It=65,At=66,bt=67,pt=68,wt=69,gt=70,mt=71,Dt=72,yt=73,Lt=74,Ft=75,Ut=76,Ct=1,Pt=2,Gt=4,Bt=8,xt=16,Ht=32,jt=64,kt=128,Mt=256,Yt=512,Vt=1024,vt=2048,Wt=4096,Kt=8192,zt=16384,Xt=32768,Qt=65536,Zt=1<<17,qt=1<<18,Jt=1<<19,$t=1<<20,te=1<<21,ee=1<<22,ne=1<<23,re=1<<24,ie=1<<25,se=1<<26,ue=1<<27,oe=1<<28;class _e{static read_bytes(t,e){const n=new _e;return n.buf=t.getUint32(e,!0),n.buf_len=t.getUint32(e+4,!0),n}static read_bytes_array(t,e,n){const r=[];for(let i=0;i<n;i++)r.push(_e.read_bytes(t,e+8*i));return r}}class fe{static read_bytes(t,e){const n=new fe;return n.buf=t.getUint32(e,!0),n.buf_len=t.getUint32(e+4,!0),n}static read_bytes_array(t,e,n){const r=[];for(let i=0;i<n;i++)r.push(fe.read_bytes(t,e+8*i));return r}}const ce=0,ae=1,de=2,le=0,Re=1,Ee=2,Ne=3,Oe=4,he=5,Se=6,Te=7;class Ie{head_length(){return 24}name_length(){return this.dir_name.byteLength}write_head_bytes(t,e){t.setBigUint64(e,this.d_next,!0),t.setBigUint64(e+8,this.d_ino,!0),t.setUint32(e+16,this.dir_name.length,!0),t.setUint8(e+20,this.d_type)}write_name_bytes(t,e,n){t.set(this.dir_name.slice(0,Math.min(this.dir_name.byteLength,n)),e)}constructor(t,e,n){this.d_ino=1n;const r=(new TextEncoder).encode(e);this.d_next=t,this.d_namlen=r.byteLength,this.d_type=n,this.dir_name=r}}const Ae=0,be=1,pe=2,we=3,ge=4,me=5,De=1,ye=2,Le=4,Fe=8,Ue=16;class Ce{write_bytes(t,e){t.setUint8(e,this.fs_filetype),t.setUint16(e+2,this.fs_flags,!0),t.setBigUint64(e+8,this.fs_rights_base,!0),t.setBigUint64(e+16,this.fs_rights_inherited,!0)}constructor(t,e){this.fs_rights_base=0n,this.fs_rights_inherited=0n,this.fs_filetype=t,this.fs_flags=e}}const Pe=1,Ge=2,Be=4,xe=8,He=1,je=2,ke=4,Me=8;class Ye{write_bytes(t,e){t.setBigUint64(e,this.dev,!0),t.setBigUint64(e+8,this.ino,!0),t.setUint8(e+16,this.filetype),t.setBigUint64(e+24,this.nlink,!0),t.setBigUint64(e+32,this.size,!0),t.setBigUint64(e+38,this.atim,!0),t.setBigUint64(e+46,this.mtim,!0),t.setBigUint64(e+52,this.ctim,!0)}constructor(t,e){this.dev=0n,this.ino=0n,this.nlink=0n,this.atim=0n,this.mtim=0n,this.ctim=0n,this.filetype=t,this.size=e}}const Ve=0,ve=1,We=2,Ke=1,ze=1,Xe=0,Qe=1,Ze=2,qe=3,Je=4,$e=5,tn=6,en=7,nn=8,rn=9,sn=10,un=11,on=12,_n=13,fn=14,cn=15,an=16,dn=17,ln=18,Rn=19,En=20,Nn=21,On=22,hn=23,Sn=24,Tn=25,In=26,An=27,bn=28,pn=29,wn=30,gn=1,mn=2,Dn=1,yn=1,Ln=2,Fn=0;class Un{write_bytes(t,e){t.setUint32(e,this.pr_name_len,!0)}constructor(t){this.pr_name_len=t}}class Cn{static dir(t){const e=new Cn;return e.tag=Fn,e.inner=new Un(t),e}write_bytes(t,e){t.setUint32(e,this.tag,!0),this.inner.write_bytes(t,e+4)}}}},e={};function n(r){var i=e[r];if(void 0!==i)return i.exports;var s=e[r]={exports:{}};return t[r](s,s.exports,n),s.exports}n.d=function(t,e){for(var r in e)n.o(e,r)&&!n.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})};var r={};!function(){n.r(r);var t=n("./node_modules/@bjorn3/browser_wasi_shim/dist/index.js");(()=>{const e=new TextDecoder("utf-8");class n extends t.Fd{fd_write(t,n){let r=0,i="";for(let s of n)i=e.decode(t.slice(s.buf,s.buf+s.buf_len)),document.getElementById("output").innerText+=i,console.log(i),r+=s.buf_len;return{ret:0,nwritten:r}}}window.DeGenPrime=class{#t=[new t.Fd,new n,new n];#e;#n;#r;wasi;constructor(){this.wasi=new t.WASI,WebAssembly.instantiateStreaming(fetch("degenprime.wasm"),{wasi_snapshot_preview1:this.wasi.wasiImport}).then((t=>{this.#n=t.module,this.#r=t.instance,document.getElementById("runButton").disabled=!1})).catch((t=>{console.error(t)}))}async setFile(t){this.#e=t.files[0]}async run(){let e=["degenprime"],n=this.#t.slice();void 0!==this.#e&&(n.push(new t.PreopenDirectory("/",{[this.#e.name]:new t.File(await this.#e.arrayBuffer())})),e.push(this.#e.name)),this.wasi.args=e,this.wasi.fds=n,this.wasi.start(this.#r);let r=this.#e.name.substr(0,this.#e.name.lastIndexOf("."))+".dgp";if(void 0!==n[3].dir.contents[r]){let t=document.createElement("a");t.href=URL.createObjectURL(new File([n[3].dir.contents[r].data],r,{type:"text/plain"})),t.innerText=r,t.setAttribute("download",r),document.getElementById("downloads").appendChild(t),document.getElementById("downloads").appendChild(document.createElement("br"))}this.#r=await WebAssembly.instantiate(this.#n,{wasi_snapshot_preview1:this.wasi.wasiImport}),document.getElementById("inputfile").value="",this.#e=void 0}}})()}()}();
//# sourceMappingURL=degenprime.js.map